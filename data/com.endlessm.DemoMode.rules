polkit.addRule(function(action, subject) {
    if ((action.id == "org.freedesktop.Flatpak.app-install" ||
         action.id == "org.freedesktop.Flatpak.runtime-install"||
         action.id == "org.freedesktop.Flatpak.app-uninstall" ||
         action.id == "org.freedesktop.Flatpak.runtime-uninstall") &&
        subject.active == true && subject.local == true &&
        subject.user == "demo-guest") {
            try {
                    polkit.spawn(["/bin/test", "-e", "/run/gnome-initial-setup/eos-demo-mode"]);
                    return polkit.Result.YES;
            } catch (e) {
                    // no-op
            }
    }
});
